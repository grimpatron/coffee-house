(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function o(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();function y(){return`
  <div class="login__container">
      <form class="login__form">
          <h2 class="login__title">Login to account</h2>

          <div class="form__group">
              <label class="form__label" for="first-name">First Name:</label>
              <input class="form__input" type="text" id="first-name" name="first-name" required/>
              <p class="form__error-message" id="error-first-name"></p>
          </div>

          <div class="form__group">
              <label class="form__label" for="surname">Surname:</label>
              <input class="form__input" type="text" id="surname" name="surname" required/>
              <p class="form__error-message" id="error-surname"></p>
          </div>

          <button class="btn form__btn" id="log-in">Log in</button>
      </form>
  </div>
  `}function _(e,t,n){const o=document.createElement("button");return o.textContent=e,o.classList.add(...n),o.id=t,o}function v(e,t,n,o,r){const a=document.createElement("button");return a.textContent=e,a.classList.add(...n),a.id=t,a.addEventListener(o,r),a}function C(e,t,n,o,r,a,c){let s=document.getElementById(`${e}`);s.removeEventListener(r,c),s.style.transition="0.4s",s.style.opacity="0",setTimeout(()=>{s.id=n,s.innerText=t,s.className=o,s.style.opacity="1",s.addEventListener(r,a)},400)}let D=1,h=0,g=0,q="",f=[],d="";function P(e){const t=e.length,n=e.reduce((a,c)=>a+c.length,0),o=t*2;return 100/(n+o)}function I(e,t){return e.length*t+t*2}async function k(){const e=document.querySelector(".puzzle"),t=document.querySelector("#check-exercise"),n=e.querySelectorAll(".card-word");let o=[];n.forEach(a=>{o.push(a.innerHTML)});const r=o.join(" ");t&&t.classList.toggle("btn--disabled",r.length!==d.length)}function x(){g+=1,document.querySelectorAll(".card-word").forEach(t=>t.classList.add("card-word--disabled")),N()}function S(e){const t=e.target;if(!t.classList.contains("btn--disabled")){document.querySelector(".puzzle").querySelectorAll(".card-word").forEach((u,L)=>{let m=u;m.innerHTML===f[L]?m.style.backgroundColor="chartreuse":m.style.backgroundColor="coral"});const a=document.querySelector(".puzzle").querySelectorAll(".card-word");let c=[];a.forEach(u=>{c.push(u.innerHTML)}),c.join(" ")===d&&(t.classList.add("btn--disabled"),C("check-exercise","Continue","next-exercise","btn","click",x,S))}}async function N(){const e=await Z(),t=document.querySelector(".sentence");t.innerHTML=q,d+=" ",d+=e.join(" "),d=d.trim();const n=e,o=G(n),r=P(n),a=document.querySelector(".desk");o.forEach(c=>{a.appendChild(R(c,I(c,r)))})}function R(e,t){const n=document.createElement("div");return n.className="card-word card-on-desk",n.style.width=t+"%",n.draggable=!0,n.ondragover=o=>F(o),n.ondragstart=o=>J(o),n.textContent=e,n}let i;function F(e){e.target.classList.contains("card-word--disabled")||(e.preventDefault(),$(i,e.target)?e.target.parentNode.insertBefore(i,e.target):e.target.parentNode.insertBefore(i,e.target.nextSibling))}function $(e,t){if(t&&e&&t.parentNode===e.parentNode){for(let n=e.previousSibling;n&&n.nodeType!==9;n=n.previousSibling)if(n===t)return!0}return!1}function J(e){e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","")),i=e.target}function U(e,t){const n=document.querySelector(`${t}`);i&&!n.contains(i)&&n.appendChild(i),k()}async function Z(){const t=await(await fetch(`https://raw.githubusercontent.com/rolling-scopes-school/rss-puzzle-data/main/data/wordCollectionLevel${D}.json`)).json();return q=t.rounds[h].words[g].textExampleTranslate,f=f.concat(t.rounds[h].words[g].textExample.split(" ")),t.rounds[h].words[g].textExample.split(" ")}function G(e){for(let t=e.length-1;t>0;t--){let n=Math.floor(Math.random()*(t+1));[e[t],e[n]]=[e[n],e[t]]}return e}function K(){f.forEach(e=>{for(let t=0;t<f.length;t++){const n=Array.from(document.querySelectorAll(".card-word"));e==n[t].innerHTML&&(n[t].click(),n.pop())}})}function V(){const e=document.querySelector("body");e.innerHTML="";const t=l("div","container"),n=l("header","header"),o=l("div","grateful","Welcome back "),r=l("span","grateful-name");r.id="grateful-name";const a=l("main","main"),c=l("div","topbar"),s=l("div","playground"),u=z("div","desk",".puzzle",".desk"),L=l("div","sentence"),m=z("div","puzzle",".desk",".puzzle"),E=l("div","interface"),B=_("Log out","log-out",["btn"]),W=v("Check","check-exercise",["btn","btn--disabled"],"click",S),j=v("Auto-Complete","auto-complete",["btn"],"click",K);o.appendChild(r),n.append(o,B),s.append(L,m,u),E.append(W,j),a.append(c,s,E),t.append(a),e.appendChild(n),e.appendChild(t)}function l(e,t,n=""){const o=document.createElement(e);return o.className=t,n&&(o.textContent=n),o}function z(e,t,n,o){const r=document.createElement(e);return r.className=t,r.addEventListener("click",function(a){X(a,n)}),r.addEventListener("dragover",function(a){Q(a)}),r.addEventListener("drop",function(a){U(a,o)}),r}function Q(e){e.preventDefault()}function X(e,t){if(document.querySelector("#next-exercise")&&C("next-exercise","Check","check-exercise","btn","click",S,x),e.target instanceof HTMLElement&&e.target.classList.contains("card-word")&&!e.target.classList.contains("card-word--disabled")){e.target.classList.contains("card-on-desk")?(e.target.classList.remove("card-on-desk"),e.target.classList.add("card-on-puzzle")):(e.target.classList.add("card-on-desk"),e.target.classList.remove("card-on-puzzle"));const n=document.querySelector(t);e.target.style.color="",n&&n.appendChild(e.target)}k()}function Y(e){const t=document.createElement("div");t.classList.add("modal__wrapper"),t.id="modal-wrapper";const n=document.createElement("div");n.classList.add("modal-window"),n.id="modal";const o=document.createElement("div");o.classList.add("modal__message"),o.innerHTML=e;const r=document.createElement("div");r.classList.add("modal__buttons");const a=document.createElement("button");a.innerHTML="Accept",a.classList.add("btn"),a.classList.add("modal__button--accept"),a.id="modal-accept";const c=document.createElement("button");return c.innerHTML="Reject",c.classList.add("btn"),c.classList.add("modal__button--reject"),c.id="modal-reject",n.appendChild(o),n.appendChild(r),r.appendChild(a),r.appendChild(c),t.appendChild(n),t}function T(){const e=localStorage.getItem("puzzle-user-data");if(e!==null)return JSON.parse(e)}let w=document.querySelector("#log-out");function M(){V(),N(),re(),w=document.querySelector("#log-out"),w.addEventListener("click",ee)}function ee(){const e=Y("Do you want to log out?");document.body.appendChild(e);const t=document.querySelector("#modal-wrapper");t.style.display="block",document.querySelector("#modal-accept").addEventListener("click",te),document.querySelector("#modal-reject").addEventListener("click",ne)}function te(){H(!1,"","")}function ne(){const e=document.querySelector("#modal-wrapper");e.style.display="none"}function re(){const e=document.querySelector("#grateful-name"),t=T();e.innerHTML=`${t.firstName} ${t.lastName}`}const oe=()=>{document.querySelector("body").innerHTML="";const e=document.createElement("div");e.className="start-container";const t=document.createElement("h1");t.className="start-title",t.textContent="english puzzle";const n=document.createElement("div");n.className="start-subtitle",n.textContent="English Puzzle is an interactive mini-game aimed at enhancing English language skills. The game integrates various levels of difficulty, hint options, and a unique puzzle-like experience with artwork. Click on words, collect phrases. Words can be grab and drop. Select tooltips in the menu.";const o=_("Start","start-btn",["btn"]);return e.append(t,n,o),e};let b=T();b!=null?b.authorization==!0?M():document.querySelector("body").innerHTML=y():(ae(!1,"",""),document.querySelector("body").innerHTML=y());function ae(e,t,n){const o=A(e,t,n),r=JSON.stringify(o);localStorage.setItem("puzzle-user-data",r)}function A(e,t,n){return{authorization:e,firstName:t,lastName:n}}function H(e,t,n){if(localStorage.getItem("puzzle-user-data")!==null){const r=A(e,t,n);localStorage.setItem("puzzle-user-data",JSON.stringify(r))}e===!1&&(document.querySelector("body").innerHTML=y(),O()),e===!0&&ce()}function ce(){document.querySelector("body").appendChild(oe()),document.querySelector("#start-btn").addEventListener("click",M)}let p;window.addEventListener("load",()=>O());function O(){p=document.querySelector("#log-in"),p==null||p.addEventListener("click",se)}function se(e){e.preventDefault();const t=document.querySelector("#first-name"),n=document.querySelector("#surname"),o=document.querySelector("#error-first-name"),r=document.querySelector("#error-surname");o.innerHTML="",r.innerHTML="",t.classList.remove("form__input--error"),n.classList.remove("form__input--error");const a=/^[A-Z][a-z-]{2,}$/,c=/^[A-Z][a-z-]{3,}$/;a.test(t.value)||(t.classList.add("form__input--error"),o.innerHTML="The name must begin with a capital letter and be at least 3 characters long."),c.test(n.value)||(n.classList.add("form__input--error"),r.innerHTML="The last name must begin with a capital letter and contain at least 4 characters."),a.test(t.value)&&c.test(n.value)&&H(!0,t.value,n.value)}
